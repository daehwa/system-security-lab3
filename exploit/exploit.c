#include <stdio.h>
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>

#define DEVICE_FILE "/dev/vul"

ssize_t read_pipe(void *dest, void *src, size_t count) {
    int pipefd[2];
    ssize_t len;

    pipe(pipefd);
    len = write(pipefd[1], src, count);
    if(len != count) {
        printf("failed read_pipe (write) @ %p: %d %d\n",src, (int)len, errno);
        return len;
    }
    len = read(pipefd[0],dest,count);
    if(len != count) {
        printf("failed read_pipe (read) @ %p: %d %d\n",src, (int)len, errno);
        return len;
    }

    close(pipefd[0]);
    close(pipefd[1]);
}
unsigned int buffer[0x3000];
int main(int argc, char* argv[]) {
    return 0;
}
